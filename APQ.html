<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>S/D 狀態導航器</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background-color: #f4f4f9; }
        .container { text-align: center; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 0.5rem; }
        .current-node { font-size: 4rem; font-weight: bold; color: #2c3e50; margin: 20px 0; }
        .buttons { display: flex; gap: 20px; justify-content: center; }
        button { padding: 15px 40px; font-size: 1.5rem; cursor: pointer; border: none; border-radius: 8px; transition: transform 0.1s; }
        .btn-s { background-color: #4CAF50; color: white; }
        .btn-d { background-color: #f44336; color: white; }
        button:active { transform: scale(0.95); }
        button:disabled { background-color: #ccc; cursor: not-allowed; }
        .reset-btn { margin-top: 30px; background: none; border: 1px solid #999; color: #666; padding: 5px 15px; font-size: 1rem; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>當前數值</h1>
    <div class="current-node" id="display">500</div>
    
    <div class="buttons">
        <button class="btn-s" onclick="move('s')" id="s-btn">S</button>
        <button class="btn-d" onclick="move('d')" id="d-btn">D</button>
    </div>

    <button class="reset-btn" onclick="reset()">重新開始 (Back to 500)</button>
    <p id="message" style="color: #666; margin-top: 20px;"></p>
</div>

<script>
    // 定義圖形結構
    const tree = {
        "500": { s: "410", d: "311" },
        "410": { s: "320", d: "302" },
        "311": { s: "221", d: "122" },
        "320": { s: "230", d: "401" },
        "302": { s: "203" },
        "221": { s: "131", d: "113" },
        "122": { s: "032" },
        "230": { s: "140" },
        "203": { s: "104" },
        "131": { s: "041", d: "212" },
        "113": { s: "014" },
        "032": { s: "023" },
        "140": { s: "050" },
        "104": { s: "005" },
        // 葉子節點
        "401": {}, "050": {}, "005": {}, "041": {}, "212": {}, "014": {}, "023": {}
    };

    let currentNode = "500";

    function updateUI() {
        document.getElementById('display').innerText = currentNode;
        const options = tree[currentNode];
        
        const sBtn = document.getElementById('s-btn');
        const dBtn = document.getElementById('d-btn');
        const msg = document.getElementById('message');

        sBtn.disabled = !options.s;
        dBtn.disabled = !options.d;

        if (!options.s && !options.d) {
            msg.innerText = "已到達終點。";
        } else {
            msg.innerText = "";
        }
    }

    function move(direction) {
        const next = tree[currentNode][direction];
        if (next) {
            currentNode = next;
            updateUI();
        }
    }

    function reset() {
        currentNode = "500";
        updateUI();
    }

    updateUI(); // 初始化
</script>

</body>
</html>